<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summarizer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <p id="pageText">
        OpenAI is an American artificial intelligence organization headquartered in San Francisco, California. 
        It aims to develop "safe and beneficial" artificial general intelligence, which it defines as "highly autonomous 
        systems that outperform humans at most economically valuable work".
    </p>

    <button id="summarizeBtn">Summarize</button>

    <!-- Popup -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <p id="summaryText">Summary will appear here...</p>
            <button id="closePopup">Close</button>
        </div>
    </div>

    <script>
        // when button is clicked â†’
        document.getElementById("summarizeBtn").onclick = async function () {

            // 1. extract text from webpage
            let text = document.documentElement.innerText.trim()

            // 2. show popup
            document.getElementById("popup").style.display = "flex";
            document.getElementById("summaryText").innerText = "Generating summary...";

            if (!text){
                document.getElementById('summaryText').innerText = 
                    "No text found on the webpage!"
                return;
            }

            // 3. send to your FastAPI
            
            let response = await fetch("http://127.0.0.1:8000/summary", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ text: text })
            });

            // 4. get summary
            let data = await response.json();

            // 5. put summary inside popup
            document.getElementById("summaryText").innerText = data.summary;
        };

        // close popup
        document.getElementById("closePopup").onclick = function () {
            document.getElementById("popup").style.display = "none";
        };
    </script>

</body>
</html>

<!-- document.body.innerHTML += `
<button id="summarizeBtn" style="position:fixed; bottom:20px; right:20px; z-index:9999; padding:12px; background:#007bff; color:white; border:none; border-radius:8px;">Summarize</button>

<div id="popup" class="popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:9999;">
    <div class="popup-content" style="background:white; padding:20px; width:350px; border-radius:12px;">
        <p id="summaryText">Your summary will appear here...</p>
        <button id="closePopup">Close</button>
    </div>
</div>`; -->
